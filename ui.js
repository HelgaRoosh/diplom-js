window.addEventListener('load', startGame);/* Ð¿Ñ€Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ Ð¾ÐºÐ½Ð°='load' Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ  startGame*/

let boardEl = document.getElementById('board');/*Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ ÑÑÑ‹Ð»ÐºÑƒ Ð½Ð° ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð¿Ð¾ ÐµÐ³Ð¾ Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€Ñƒ (ID); Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ ÑÐ²Ð»ÑÐµÑ‚ÑÑ ÑÑ‚Ñ€Ð¾ÐºÐ¾Ð¹, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð° Ð´Ð»Ñ Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ð¸ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°; Ð¾Ð½Ð° Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð° Ð¿Ñ€Ð¸ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð¸ Ð°Ñ‚Ñ€Ð¸Ð±ÑƒÑ‚Ð° id Ð² HTML Ð¸Ð»Ð¸ Ð¸Ð· ÑÐºÑ€Ð¸Ð¿Ñ‚Ð°.*/
let modalEl = document.getElementById('modal');/*Ð¸Ð³Ñ€Ð°Ñ‚ÑŒ ÐµÑ‰Ðµ*/
let resetButtons = document.getElementsByClassName('reset');

for (let btn of resetButtons) { /* Ð¿Ð¾ ÐºÐ»Ð¸ÐºÑƒ Ð½Ð° ÐºÐ½Ð¾Ð¿ÐºÑƒ ÐµÑÐ»Ð¸ Ð½Ðµ ÑÐºÑ€Ñ‹Ñ‚Ð° ÐºÐ½Ð¾Ð¿ÐºÐ° - ÑÐºÑ€Ñ‹Ñ‚ÑŒ ÐµÐµ Ð¸ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð¡Ñ‚Ð°Ñ€Ñ‚Ð“ÐµÐ¹Ð¼*/
  btn.addEventListener('click', function () {
    if (!modalEl.classList.contains('hidden')) {/*contains - ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚*/
      modalEl.classList.add('hidden');/*add - Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ*/
    }
    startGame();
  });
}

boardEl.addEventListener('click', function (event) {
  let targetClasses = event.target.classList; /*Ð¡Ð²Ð¾Ð¹ÑÑ‚Ð²Ð¾ event.target ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚, Ð½Ð° ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¼ ÑÑ€Ð°Ð±Ð¾Ñ‚Ð°Ð»Ð¾ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ðµ. Ð­Ñ‚Ð¾ Ð½Ðµ Ñ‚Ð¾Ñ‚ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚, Ðº ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¼Ñƒ Ð±Ñ‹Ð» Ð¿Ñ€Ð¸Ð²ÑÐ·Ð°Ð½ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº ÑÑ‚Ð¾Ð³Ð¾ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ, Ð° Ð¸Ð¼ÐµÐ½Ð½Ð¾ ÑÐ°Ð¼Ñ‹Ð¹ Ð³Ð»ÑƒÐ±Ð¾ÐºÐ¸Ð¹ Ñ‚ÐµÐ³, Ð½Ð° ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð½ÐµÐ¿Ð¾ÑÑ€ÐµÐ´ÑÑ‚Ð²ÐµÐ½Ð½Ð¾ Ð±Ñ‹Ð», Ðº Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ñƒ, ÑÐ¾Ð²ÐµÑ€ÑˆÐµÐ½ ÐºÐ»Ð¸Ðº*/
  let targetData = event.target.dataset;/*Ñ€Ð°Ð·Ð¼ÐµÑ‰ÐµÐ½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…?*/
  if (targetClasses.contains('field') && /*ÐµÑÐ»Ð¸ ÑÑ‚Ð¾ Ð¿Ð¾Ð»Ðµ*/!targetClasses.contains('busy')) {/*Ð¸ Ð¾Ð½Ð¾ Ð½Ðµ Ð·Ð°Ð½ÑÑ‚Ð¾*/
    click(targetData.row, targetData.col);
  }
});

function showWinner(winner) {
  let header = modalEl.getElementsByTagName('h2')[0];/*Ð¸Ñ‰ÐµÑ‚ Ð²ÑÐµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ñ Ð·Ð°Ð´Ð°Ð½Ð½Ñ‹Ð¼ Ð²Ð½ÑƒÑ‚Ñ€Ð¸ ÑÐºÐ¾Ð±Ð¾Ðº Ñ‚ÐµÐ³Ð¾Ð¼ Ð¸ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð¸Ñ… Ð² Ð²Ð¸Ð´Ðµ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¸. ÐšÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ñ - ÑÑ‚Ð¾ Ð¼Ð°ÑÑÐ¸Ð² Ð¾Ð±ÑŠÐµÐºÑ‚Ð¾Ð², ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ ÑÐ°Ð¼Ð° Ð¿Ð¾ ÑÐµÐ±Ðµ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð¾Ð±ÑŠÐµÐºÑ‚Ð¾Ð¼, Ñ‚Ð¾ ÐµÑÑ‚ÑŒ Ð¸Ð¼ÐµÐµÑ‚ ÑÐ²Ð¾Ð¸ ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð° Ð¸ Ð¼ÐµÑ‚Ð¾Ð´Ñ‹. = Ð·Ð°Ð¿Ð¸ÑˆÐµÑ‚ Ð² Ñ‚ÐµÐ³ h2 Ð½Ð° Ð¸Ð½Ð´ÐµÐºÑ 0 Ñ‚Ð¾, Ñ‡Ñ‚Ð¾ Ð±ÑƒÐ´ÐµÑ‚ Ð² Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð¹*/
  header.textContent = `ðŸ¾ ÐŸÐ¾Ð±ÐµÐ´Ð¸Ð» Ð¸Ð³Ñ€Ð¾Ðº â„–${winner + 1}! ðŸ¾`;/*Ð²Ð¸Ð´Ð¸Ð¼Ð¾ header ÑÑ‚Ð¾ Ð¾Ð±ÑŠÐµÐºÑ‚ ÑÐ¾ ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð¾Ð¼ textContent Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ðµ Ð·Ð°Ð¿Ð¸ÑˆÐµÐ¼ Ð¿Ð¾Ð±ÐµÐ´Ð¸Ñ‚ÐµÐ»Ñ. Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¸ Ñ‡ÐµÐ¼ Ð·Ð´ÐµÑÑŒ +1?*/
  modalEl.classList.remove('hidden');/*ÐœÐµÑ‚Ð¾Ð´ remove Ð¾Ð±ÑŠÐµÐºÑ‚Ð° classList ÑƒÐ´Ð°Ð»ÑÐµÑ‚ Ð·Ð°Ð´Ð°Ð½Ð½Ñ‹Ð¹ CSS ÐºÐ»Ð°ÑÑ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°. - Ñ‚Ð¸Ð¿Ð° Ð´ÐµÐ»Ð°ÐµÑ‚ Ð²Ð¸Ð´Ð¸Ð¼Ñ‹Ð¼ h2?*/
}

function renderBoard(board) {/*Ð¿Ñ€Ð¾Ñ€Ð¸ÑÐ¾Ð²Ñ‹Ð²Ð°ÐµÑ‚ Ð´Ð¾ÑÐºÑƒ*/
  const fields = [];
  for (let [i, row] of board.entries()) { /*Object.entries() Ð¼ÐµÑ‚Ð¾Ð´ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð¼Ð°ÑÑÐ¸Ð² ÑÐ¾Ð±ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ñ… Ð¿ÐµÑ€ÐµÑ‡Ð¸ÑÐ»ÑÐµÐ¼Ñ‹Ñ… ÑÐ²Ð¾Ð¹ÑÑ‚Ð² ÑƒÐºÐ°Ð·Ð°Ð½Ð½Ð¾Ð³Ð¾ Ð¾Ð±ÑŠÐµÐºÑ‚Ð° Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ [key, value], Ð² Ñ‚Ð¾Ð¼ Ð¶Ðµ Ð¿Ð¾Ñ€ÑÐ´ÐºÐµ, Ñ‡Ñ‚Ð¾ Ð¸ Ð² Ñ†Ð¸ÐºÐ»Ðµ for...in (Ñ€Ð°Ð·Ð½Ð¸Ñ†Ð° Ð² Ñ‚Ð¾Ð¼, Ñ‡Ñ‚Ð¾ for-in Ð¿ÐµÑ€ÐµÑ‡Ð¸ÑÐ»ÑÐµÑ‚ ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð° Ð¸Ð· Ñ†ÐµÐ¿Ð¾Ñ‡ÐºÐ¸ Ð¿Ñ€Ð¾Ñ‚Ð¾Ñ‚Ð¸Ð¿Ð¾Ð²). ÐŸÐ¾Ñ€ÑÐ´Ð¾Ðº ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð² Ð² Ð¼Ð°ÑÑÐ¸Ð²Ðµ ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ÑÑ Object.entries() Ð½Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ Ñ‚Ð¾Ð³Ð¾ ÐºÐ°Ðº Ð¾Ð±ÑŠÐµÐºÑ‚ Ð¾Ð±ÑŠÑÐ²Ð»ÐµÐ½. Ð•ÑÐ»Ð¸ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ð² Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»Ñ‘Ð½Ð½Ð¾Ð¼ Ð¿Ð¾Ñ€ÑÐ´ÐºÐµ, Ñ‚Ð¾  Ð¼Ð°ÑÑÐ¸Ð² Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð¾Ñ‚ÑÐ¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½ Ð´Ð¾ Ð²Ñ‹Ð·Ð¾Ð²Ð° Ð¼ÐµÑ‚Ð¾Ð´Ð°, Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€ Object.entries(obj).sort((a, b) => a[0] - b[0]);.*/
    for (let [j, value] of row.entries()) {
      fields.push(`
        <div class="field ${value ? 'busy' : 'free'}" 
            data-row="${i}" 
            data-col="${j}"
            style="grid-row:${i + 1};grid-column:${j + 1};"
        >
          ${value || ''}
        </div>
      `);
    }
  }
  boardEl.innerHTML = fields.join('');
}
